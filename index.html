<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Program MBKM Desa Bangunemo - KAMPUNG IKLIM</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      background: #f5f9f6;
      color: #333;
    }

    header {
      display: flex;
      align-items: center;
      background: #2e7d32;
      color: white;
      padding: 15px 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    header img {
      height: 50px;
      margin-right: 15px;
    }

    header h1 {
      font-size: 22px;
      margin: 0;
    }

    main {
      padding: 25px;
    }

    .table-container {
      background: white;
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    .table-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .table-header h2 {
      margin: 0;
      font-size: 19px;
      color: #2e7d32;
    }

    .add-btn {
      background: #2e7d32;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: 0.3s;
    }

    .add-btn:hover {
      background: #256428;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      overflow: hidden;
      border-radius: 10px;
    }

    thead {
      background: #388e3c;
      color: white;
    }

    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    tbody tr:nth-child(even) {
      background: #f9f9f9;
    }

    tbody tr:hover {
      background: #e8f5e9;
    }

    .action-btn {
      cursor: pointer;
      border: none;
      background: none;
      margin: 0 5px;
      transition: 0.2s;
    }

    .icon {
      width: 22px;
      height: 22px;
      vertical-align: middle;
    }

    .edit .icon {
      fill: #ff9800;
    }

    .delete .icon {
      fill: #f44336;
    }

    .edit:hover .icon {
      fill: #e68900;
      transform: scale(1.2);
    }

    .delete:hover .icon {
      fill: #d32f2f;
      transform: scale(1.2);
    }

    /* Modal styling */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 12px;
      width: 420px;
      max-width: 90%;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-content h3 {
      margin-top: 0;
      color: #2e7d32;
      text-align: center;
    }

    .modal-content label {
      display: block;
      margin: 10px 0 5px;
      font-size: 14px;
    }

    .modal-content input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal-actions {
      margin-top: 15px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .modal-actions button {
      padding: 8px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .save-btn {
      background: #2e7d32;
      color: white;
    }

    .cancel-btn {
      background: #ccc;
    }
  </style>
</head>
<body>

  <header>
    <img src="amik.png" alt="Logo Desa">
    <h1>Program MBKM Desa Bangunemo - KAMPUNG IKLIM</h1>
  </header>

  <main>
    <div class="table-container">
      <div class="table-header">
        <h2>Daftar Program Kampung Iklim</h2>
        <button class="add-btn" onclick="openModal()">
           Tambah Data
        </button>
      </div>
      <table id="programTable">
        <thead>
          <tr>
            <th>No</th>
            <th>Jenis Program</th>
            <th>Contoh Kegiatan</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <!-- Data dinamis -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Modal -->
  <div class="modal" id="dataModal">
    <div class="modal-content">
      <h3 id="modalTitle">Tambah Data</h3>
      <label>Jenis Program:</label>
      <input type="text" id="programInput">
      <label>Kegiatan:</label>
      <input type="text" id="activityInput">

      <div class="modal-actions">
        <button class="cancel-btn" onclick="closeModal()">Batal</button>
        <button class="save-btn" onclick="saveData()">Simpan</button>
      </div>
    </div>
  </div>

  <script>
    let editIndex = null;

    function openModal(index = null) {
      document.getElementById('dataModal').style.display = 'flex';
      if(index !== null){
        editIndex = index;
        const row = document.querySelectorAll('#tableBody tr')[index];
        document.getElementById('programInput').value = row.cells[1].innerText;
        document.getElementById('activityInput').value = row.cells[2].innerText;
        document.getElementById('modalTitle').innerText = "Edit Data";
      } else {
        editIndex = null;
        document.getElementById('programInput').value = "";
        document.getElementById('activityInput').value = "";
        document.getElementById('modalTitle').innerText = "Tambah Data";
      }
    }

    function closeModal(){
      document.getElementById('dataModal').style.display = 'none';
    }

    function saveData(){
      const program = document.getElementById('programInput').value.trim();
      const activity = document.getElementById('activityInput').value.trim();

      if(program && activity){
        if(editIndex !== null){
          const row = document.querySelectorAll('#tableBody tr')[editIndex];
          row.cells[1].innerText = program;
          row.cells[2].innerText = activity;
        } else {
          const tbody = document.getElementById('tableBody');
          const row = tbody.insertRow();
          row.insertCell(0).innerText = tbody.rows.length; // nomor urut
          row.insertCell(1).innerText = program;
          row.insertCell(2).innerText = activity;
          const actions = row.insertCell(3);
          actions.innerHTML = actionButtons(tbody.rows.length-1);
        }
        updateNumbers();
        closeModal();
      } else {
        alert("Harap isi semua data!");
      }
    }

    function deleteRow(btn){
      if(confirm("Yakin ingin menghapus data ini secara permanen?")){
        const row = btn.parentNode.parentNode;
        row.parentNode.removeChild(row);
        updateNumbers();
      }
    }

    function updateNumbers(){
      const rows = document.querySelectorAll('#tableBody tr');
      rows.forEach((row, index) => {
        row.cells[0].innerText = index+1;
        row.cells[3].innerHTML = actionButtons(index);
      });
    }

    function actionButtons(index){
      return `
        <button class="action-btn edit" onclick="openModal(${index})" title="Edit">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 
            7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 
            0 0 0-1.41 0l-1.83 1.83 3.75 
            3.75 1.83-1.83z"/>
          </svg>
        </button>
        <button class="action-btn delete" onclick="deleteRow(this)" title="Hapus">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M16 9v10H8V9h8m-1.5-6h-5l-1 
            1H5v2h14V4h-4.5l-1-1z"/>
          </svg>
        </button>
      `;
    }
  </script>

</body>
</html>
